<!DOCTYPE html>
<html>

<head>
    <title>European contact tracing mobile apps - Dashboard</title>

    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta charset="utf-8">
    <meta name="author" content="Alessandro Dalla Benetta, a.dallabenetta@gmail.com">

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css">
    <link rel="stylesheet" href="//cdn.datatables.net/1.10.21/css/jquery.dataTables.min.css">


    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>

    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"></script>
    <script src="//cdn.datatables.net/1.10.21/js/jquery.dataTables.min.js"></script>
    <script src="scripts/underscore.min.js"></script>

    <script src="//unpkg.com/d3-hexgrid"></script>
    <script src="https://d3js.org/d3.v6.min.js"></script>
    <script src="https://d3js.org/d3-scale-chromatic.v1.min.js"></script>
    <script src="contact_tracing_apps_dashboard/layout.cloud.js"></script>
    <!--<script src="https://d3js.org/d3-geo-projection.v2.min.js"></script>-->
    <script src="//unpkg.com/d3-geo-projection"></script>
    <script src='//unpkg.com/simple-statistics'></script>

    <!-- Data -->
    <script src="contact_tracing_apps_sentiment_analysis/data/sa_general_info.js"></script>
    <script src="contact_tracing_apps_sentiment_analysis/data/data_table.js"></script>
    <script src="contact_tracing_apps_sentiment_analysis/data/geo_data.js"></script>
    <script src="contact_tracing_apps_sentiment_analysis/data/plot_timeline_charts.js"></script>
    <script src="contact_tracing_apps_sentiment_analysis/data/geo_sa_data.js"></script>
    <script src="contact_tracing_apps_basic_information/data/sa.js"></script>


    <!-- Generation charts-->
    <script src="contact_tracing_apps_sentiment_analysis/js/main.js"></script>
    <script src="contact_tracing_apps_sentiment_analysis/js/stacked_bar_chart.js"></script>
    <script src="contact_tracing_apps_sentiment_analysis/js/plot_chart.js"></script>
    <script src="contact_tracing_apps_sentiment_analysis/js/geo_chart.js"></script>
    <script src="contact_tracing_apps_sentiment_analysis/js/sa_sunburst.js"></script>
    <script src="contact_tracing_apps_sentiment_analysis/js/pie_chart.js"></script>

    <style>
        div.tooltip {
            position: absolute;
            text-align: center;
            width: 60px;
            height: 28px;
            padding: 2px;
            font: 12px sans-serif;
            background: lightsteelblue;
            border: 0px;
            border-radius: 8px;
            pointer-events: none;
        }

        #wrap {
            width: 1200px;
            margin: auto;
            height: 900px;

            margin-top: 10px;
        }
    </style>

    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-174641246-1"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());
        gtag('config', 'UA-174641246-1');
    </script>

    <script src="contact_tracing_apps_dashboard/us.js"></script>
    <script src="contact_tracing_apps_dashboard/main.js"></script>
</head>


<body>
    <div id="wrap">
        <h3>Sentiment analysis about Contact tracing apps</h3>

        <h4>Introduction</h4>

        <div>
            <p>
                The extraction of opinions was performed analysing <span id="total_tweets"></span> tweets
                collected from July 2020 to July 2021 as already mentioned in the
                <a href="./index_contact_tracing_apps_basic_information.html">basic information section</a>.
            </p>

            <p>
                The sentiment analysis was performed on the following languages: English, French, German, Spanish and
                Italian.
                The pie chart below shows the distribution of the languages on the datasets. As expected the main
                languages is
                English,followed by the Italian language and German language. The Spanish and French language have
                approximately
                the same number of tweets. Also, the pie chart represents the unclassifed tweets, where the standard
                Twitter engine
                was not able to classify the text inside the tweet. Finally, Others languages which is a small
                percentage
                of different laguages not inclided in the our study.
            </p>
            <div id="chart_languages_content">
                <svg id="chart_languages" width="400" height="400"></svg>
            </div>

            <br /><br />
            <p>
                In order to extract negative, positive and neutral sentiments different pretrained BERT models
                have been used respecting the five main languages considered in the datasets. Also, considering that
                the tweet-texts are cleaned by removing no alphanumeric character and hyperink.
                Below the list of the pre-trained bert model and the training set used to learn the classifier.
            </p>

            <ul>
                <li><a href="https://huggingface.co/cardiffnlp/twitter-roberta-base-sentiment">English - model trained
                        on ~58M tweets</a></li>
                <li><a href="https://github.com/TheophileBlard/french-sentiment-analysis-with-bert">French - model
                        trained with 100k positive tweets and 100k negative tweets</a></li>
                <li><a href="https://huggingface.co/oliverguhr/german-sentiment-bert#how-to-use">German - the training
                        data contains texts dorm different domains like Twitter, facebook and reviews</a></li>
                <li><a href="https://huggingface.co/neuraly/bert-base-italian-cased-sentiment">Italian - model trained
                        with 45k tweets</a></li>
                <li><a href="https://huggingface.co/finiteautomata/beto-sentiment-analysis">Spanish - model trained with
                        ~5k tweets</a></li>
            </ul>


            <p>
                In details, the <span id="neutral_tweets_relative"></span>% of tweets are classified without
                opinions (<span id="neutral_tweets"></span> tweets) and labeled as <em>Neutral tweets</em>.

                The <span id="no_classified_tweets_relative"></span>% of tweets are excluded from this analysis
                becouse 1) the language detected is not present in the main list of languages of our dataset
                (<span id="others_tweet"></span> tweets) or
                2) the Twitter engine for language classification is not able to detect the language
                (<span id="undefined_tweet"></span> tweets).

                The tweets with opinions are the <spam id="with_opinions"></spam>% where around three-quarters are
                negative teewts
                (<spam id="negative_tweets"></spam> tweets) and one-quarter positive tweets (<spam id="positve_tweets">
                </spam> tweets).
            </p>



        </div>
        <p>
            The below table shows the clasified tweets by sentiment splitted by mobile covid apps.
            On average, the neutral tweets are the half of the total tweets, except the app Immuni
            with the 65% and the StopCovid app with the 14%.
        </p>

        <p>
            Except for the Erouska and Smittestopp mobile apps, the number of positive
            tweets is less respect the negative teewts. Futhermore, the percentage of
            positive tweets not exeed the 20% except the French mobile apps where
            the positive teewts is to 37%.
        </p>

        <p>
            Negative tweets are predominant except the aforementioned mobile apps
            Erouska and Smittestopp.
            and for some mobile apps the ratio beetween positive and negative tweet is minor of 0.5
            indicating a lot of negative opinions.
        </p>

        <div style="margin-top: 10px;">
            <table id="sa_table"></table>
        </div>
        <div>
            <div id="chart_1_content">
                <svg id="chart_1" width="1300" height="550"></svg>
            </div>

            <p>
                The stacked barchar represents the tweets collected about
                the european contact tracing apps and classified as neutral, positive and negative.
                On average, the number of negative tweets is greater respect the positive tweets except for
                the French mobile apps whre the ratio of positive and negative tweets is to 1.

            </p>

        </div>



        <div id="basic_information_sa_starbust">
            <h4>Geographical distribution and temporal evolution of sentiments and opinions</h4>

            <p>


                The scope of this paragraph is to analyze the sentiments and opinions combining
                geographical and temporal information. We start with a simple consideration which each
                mobile apps refers to specific country. Indeed, the NHS covid-19 app for UK, Immuni for Italy
                and in this way for the rest of mobile apps. However, we have detected a
                subset of tweets which mention two or more mobile apps but the size of this dataset is very low
                respect the all dataset. Consequently, we developed the following hierarchical chart
                which shows how the twitter users think in general about the covid-19 apps splitted by
                country.The hierarchical chart shows that in general the users are pessimistc except
                for the countries UK and France.</p>
            </p>
            <svg id="basic_information_sa_starbust_svg" width="800" height="500"></svg>


            <p>

                As already mentioned in the basic information section, place names has been extracted
                from the tweet-text. Thus, we can combine the geographic and sentiment analysis
                by filtering the dataset and obtain only geo-sentiment tweets. We have detected
                <span id="geo_sentiment_tweets"></span> tweets where the tweet-text contains almost one
                place name and an opinion. We have considered only the geo-sentiment tweets regarding the 
                Europe shich are <span id="europe_geo_sentiment_tweets"></span>.
            </p>
            <p>

                The following maps show the geographical distribution of geo-sentiment tweets. For each hex-grid
                the intensity of the background color represents the number of tweets detected in its area.
                Also, a double vertical bar chart is displayed, where the blue bar represents the positive tweets
                and the red the negative tweets.
                The main areas with a hight activities corresponding to the European capitals: Paris, London, Dublin
                and Madrid. For the countries Germany and Italy the tweets are distrubuite more homogeneously.

            </p>
            <div id="chart_4_content">
                <svg id="chart_4" width="1300" height="1200"></svg>
            </div>

        </div>

        <h4>Temporal evolution of positive and negative tweets</h4>
        <svg id="chart_plot" width="1300" height="800"></svg>

        <h4>Hashtags network: Positive vs Negative</h4>
        [number of tweet, degree, remove neutral]
        [combinations]
        [positive]
        [negative]
        <img src="contact_tracing_apps_sentiment_analysis/data/sa_network_1.png" />
        [[ move hashtags section ]]
    </div>
</body>

</html>

<!-- https://stackoverflow.com/questions/50478133/d3js-export-svg-to-image -->